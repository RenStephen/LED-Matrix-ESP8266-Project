<!DOCTYPE html>
<html>
  <body>
    <h3>click here to query for weather data</h3>
    <button id="btn" onclick="buttonFunction()">Weather</button>
    <p id="weather"></p>
    <h3>Click for rain</h3>
    <button id="rain" onclick="rainFunction()">
      rain
    </button>
    <h3>Game of life</h3>
    <button id="Game of life" onclick="gameOfLifeFunction()">
      Game of life
    </button>
  </body>
</html>
<script>
  const url = "http://192.168.0.45/";
  const button = document.getElementById("btn");
  const weather_element = document.getElementById("weather");
  const HTTP = new XMLHttpRequest();

  const rainFunction = () => {
    HTTP.open("GET", url + "handle_rain");
    HTTP.send();
  };
  const gameOfLifeFunction = () => {
    HTTP.open("GET", url + "set_matrix");
    HTTP.send();
  };
  const buttonFunction = () => {
    HTTP.open("GET", url + "handle_weather");
    HTTP.send();

    button.innerHTML = "Obtaining weather Data...";
    HTTP.onreadystatechange = e => {
      if (HTTP.readyState === 4 && HTTP.status === 200) {
        button.innerText = "Weather";
        response = JSON.parse(HTTP.responseText);
        console.log(response.list[0].main.temp);
        weather_element.innerText = String(response.list[0].main.temp);
      }
    };
  };
</script>
